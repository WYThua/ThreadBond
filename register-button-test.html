<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>注册按钮测试</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        background: #f5f5f5;
      }
      .test-container {
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
      }
      .test-step {
        margin: 15px 0;
        padding: 10px;
        border-left: 4px solid #007bff;
        background: #f8f9fa;
      }
      .success {
        border-left-color: #28a745;
      }
      .error {
        border-left-color: #dc3545;
      }
      .warning {
        border-left-color: #ffc107;
      }

      button {
        background: #007bff;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
        margin: 5px;
      }
      button:hover {
        background: #0056b3;
      }
      button:disabled {
        background: #6c757d;
        cursor: not-allowed;
      }

      .console-output {
        background: #000;
        color: #00ff00;
        padding: 15px;
        border-radius: 4px;
        font-family: monospace;
        font-size: 12px;
        max-height: 300px;
        overflow-y: auto;
        white-space: pre-wrap;
      }
    </style>
  </head>
  <body>
    <h1>🔍 注册按钮测试页面</h1>

    <div class="test-container">
      <h2>测试步骤</h2>
      <div class="test-step">
        <strong>1. 打开注册页面</strong><br />
        访问:
        <a href="http://localhost:8080/register" target="_blank"
          >http://localhost:8080/register</a
        >
      </div>

      <div class="test-step">
        <strong>2. 打开浏览器开发者工具</strong><br />
        按 F12 键，切换到 Console 面板
      </div>

      <div class="test-step">
        <strong>3. 填写注册表单</strong><br />
        - 邮箱: test@example.com<br />
        - 点击"Send Code"获取验证码<br />
        - 验证码: 输入收到的6位数字<br />
        - 密码: password123<br />
        - 确认密码: password123<br />
        - 勾选同意条款
      </div>

      <div class="test-step">
        <strong>4. 点击注册按钮</strong><br />
        点击"Create Account"按钮，观察控制台输出
      </div>
    </div>

    <div class="test-container">
      <h2>快速测试工具</h2>
      <p>在注册页面的控制台中运行以下命令：</p>

      <button onclick="copyToClipboard('testRegisterButton()')">
        复制: 运行完整测试
      </button>

      <button onclick="copyToClipboard('fillTestForm()')">
        复制: 填写测试表单
      </button>

      <button onclick="copyToClipboard('$vm0.canSubmit')">
        复制: 检查按钮状态
      </button>

      <button onclick="copyToClipboard('$vm0.handleRegister()')">
        复制: 手动触发注册
      </button>
    </div>

    <div class="test-container">
      <h2>预期的控制台输出</h2>
      <div class="console-output" id="expectedOutput">
        🚀 Register button clicked, starting registration process... 📊 Form
        data: {email: "test@example.com", verificationCode: "123456", password:
        "password123", confirmPassword: "password123", agreeTerms: true} 📊
        Errors: {email: "", verificationCode: "", password: "", confirmPassword:
        ""} 📊 Can submit: true ✅ Form validation passed, calling register
        API...
      </div>
    </div>

    <div class="test-container">
      <h2>常见问题解决</h2>

      <div class="test-step error">
        <strong>问题1: 按钮是灰色的，无法点击</strong><br />
        解决: 确保所有字段都已填写，密码匹配，已勾选同意条款
      </div>

      <div class="test-step error">
        <strong>问题2: 点击按钮没有控制台输出</strong><br />
        解决: 检查是否有JavaScript错误，刷新页面重试
      </div>

      <div class="test-step error">
        <strong>问题3: 有输出但没有网络请求</strong><br />
        解决: 检查验证码是否正确，查看Network面板
      </div>

      <div class="test-step warning">
        <strong>问题4: 验证码获取失败</strong><br />
        解决: 确保后端服务正在运行，检查邮箱格式
      </div>
    </div>

    <div class="test-container">
      <h2>调试命令</h2>
      <p>在浏览器控制台中运行：</p>
      <div class="console-output">
        // 检查表单数据 $vm0.form // 检查错误信息 $vm0.errors //
        检查是否可以提交 $vm0.canSubmit // 手动触发注册 $vm0.handleRegister() //
        检查按钮元素 document.querySelector('.register-button') //
        检查按钮是否禁用 document.querySelector('.register-button').disabled
      </div>
    </div>

    <script>
      function copyToClipboard(text) {
        navigator.clipboard
          .writeText(text)
          .then(() => {
            alert("已复制到剪贴板: " + text);
          })
          .catch((err) => {
            console.error("复制失败:", err);
            // 备用方法
            const textArea = document.createElement("textarea");
            textArea.value = text;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand("copy");
            document.body.removeChild(textArea);
            alert("已复制到剪贴板: " + text);
          });
      }

      // 检查注册页面是否打开
      function checkRegisterPage() {
        fetch("http://localhost:8080/register")
          .then((response) => {
            if (response.ok) {
              document.querySelector(".test-step").classList.add("success");
            }
          })
          .catch((error) => {
            console.log("注册页面未打开或无法访问");
          });
      }

      // 页面加载时检查
      checkRegisterPage();
    </script>
  </body>
</html>
